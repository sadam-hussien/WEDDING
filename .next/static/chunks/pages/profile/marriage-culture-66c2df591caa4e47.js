(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{973:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/marriage-culture",function(){return t(8597)}])},7474:function(e,n,t){"use strict";function i(e){let n={};return e.forEach(e=>{n[e.name]=e.value||""}),n}function a(e){let n=new Date(e),t=n.getFullYear(),i=n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1),a=n.getDate()>9?n.getDate():"0"+n.getDate();return"".concat(t,"-").concat(i,"-").concat(a)}t.d(n,{J:function(){return a},e:function(){return i}})},1661:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(5893),a=t(5675),l=t.n(a),r=t(682),s=t(3970),o=t(1664),c=t.n(o),d=t(1163),u=t(1649),f=t(5949),m=t(5753),h=t(1955);let p="profile-layout-navbar-item d-flex align-items-center justify-content-between";function v(e){var n,t,a,o;let{children:v}=e,{pathname:x,reload:j}=(0,d.useRouter)(),{user:g}=(0,u.v9)(e=>e.auth),N=(0,u.I0)();return(0,i.jsx)("div",{className:"profile-layout",children:(0,i.jsxs)(r.Z,{children:[(0,i.jsxs)("aside",{className:"profile-layout-aside d-flex flex-column",children:[(0,i.jsx)("div",{className:"profile-layout-header border-bottom  d-flex mb-lg align-items-center justify-content-between gap-3",children:(0,i.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,i.jsx)(l(),{src:(null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.avatar)||"/images/user-placeholder.png",alt:"",className:"img-fluid profile-layout-aside-avatar rounded-circle",width:60,height:60}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h5",{className:"profile-layout-aside-name m-0",children:[null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.first_name," ",null==g?void 0:null===(a=g.data)||void 0===a?void 0:a.middle_name]}),(0,i.jsx)("span",{children:null==g?void 0:null===(o=g.data)||void 0===o?void 0:o.package_type})]})]})}),(0,i.jsx)("nav",{className:"profile-layout-navbar",children:Object.values(s.m).map((e,n)=>(0,i.jsxs)(c(),{href:e.path,className:x===e.path?"active "+p:p,children:[(0,i.jsx)("span",{children:e.title}),(0,i.jsx)("i",{className:"las la-angle-left icon"})]},n))}),(0,i.jsx)("div",{className:"mt-auto",children:(0,i.jsx)(f.un,{type:"button",variant:"danger",style:{minWidth:"100%"},title:"تسجيل خروج",onClick:function(){h.Z.remove("access_token"),N((0,m.kS)()),j()}})})]}),(0,i.jsx)("div",{className:"profile-layout-content",children:v})]})})}},8061:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(5893),a=t(5949),l=t(1664),r=t.n(l);function s(e){return(0,i.jsxs)("div",{className:" mt-auto d-flex align-items-center justify-content-between border-top pt-4 gap-4",children:[(0,i.jsx)(a.Ai,{type:"submit",title:"حفظ",icon:"las la-check",style:{minWidth:"150px"},radius:!0,loading:e.loading}),e.path&&(0,i.jsxs)(r(),{href:e.path,className:"profile-form-footer d-flex align-items-center gap-3",children:[(0,i.jsx)("span",{children:e.link}),(0,i.jsx)("i",{className:"las la-long-arrow-alt-left icon"})]})]})}},5491:function(e,n,t){"use strict";t.d(n,{U:function(){return o}});var i=t(4597),a=t(4699);function l(e){return(0,a.Z)().post("user/profile",e)}function r(){return(0,a.Z)().get("user/profile")}var s=t(5949);function o(e){let{handlePayload:n}=e,{data:t,isLoading:a}=(0,i.ib)({queryFn:r,queryKey:"get-profile-data"}),{mutate:o,isLoading:c}=(0,i.uV)({queryFn:l,alert:!1});return{data:null==t?void 0:t.data,isLoadingProfileData:a,isLoading:c,handleSubmit:function(e,t){let i=n(e);o(i,{onSuccess:e=>{(0,s.FN)({icon:"success",title:"تم تحديث البيانات بنجاح"})},onError:e=>{var n,i;let a=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.errors;if(a)for(let e in a)t.setFieldError(e,a[e][0]);(0,s.FN)({icon:"error",title:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message})}})}}}},8597:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return p},default:function(){return v}});var i=t(5893),a=t(3663),l=t(1661),r=t(2175),s=t(3970),o=t(5949),c=t(6968),d=t(4051),u=t(1555),f=t(7474),m=t(8061),h=t(5491),p=!0;function v(){let{marriageCulture:e}=s.m,n={};e.tabs.forEach(e=>{let t=(0,f.e)(e.fields);n={...n,...t}});let{handleSubmit:t,isLoading:a,isLoadingProfileData:l,data:p}=(0,h.U)({handlePayload:function(e){let n=new FormData;for(let t in e)n.append(t,e[t]);return n.append("step",7),n}});return l?(0,i.jsx)(c.Z,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):(0,i.jsx)("div",{children:(0,i.jsx)(r.J9,{initialValues:(null==p?void 0:p.step_7)||n,onSubmit:t,children:n=>{let{values:t}=n;return(0,i.jsxs)(r.l0,{className:"h-100 d-flex flex-column profile-form",children:[e.tabs.map((e,n)=>(0,i.jsxs)("div",{className:"mb-lg",children:[(0,i.jsx)("h5",{className:"profile-form-tab-title mb-md",children:e.title}),(0,i.jsx)("div",{className:"profile-form-tab-fields box",children:(0,i.jsx)(d.Z,{children:e.fields.map((e,t)=>(0,i.jsx)(u.Z,{...e.cols,children:(0,i.jsx)(o.nG,{item:e})},n+e.id))})})]},n)),(0,i.jsx)(m.Z,{loading:a})]})}})})}v.getLayout=function(e){return(0,i.jsx)(a.Z,{containerProps:s.n.containerProps,headerProps:s.n.headerProps,children:(0,i.jsx)(l.Z,{children:e})})}},1163:function(e,n,t){e.exports=t(6885)}},function(e){e.O(0,[296,438,907,776,251,665,774,888,179],function(){return e(e.s=973)}),_N_E=e.O()}]);