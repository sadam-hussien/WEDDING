(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{1833:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/marital-status",function(){return t(6019)}])},7474:function(e,n,t){"use strict";function a(e){let n={};return e.forEach(e=>{n[e.name]=e.value||""}),n}function i(e){let n=new Date(e),t=n.getFullYear(),a=n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1),i=n.getDate()>9?n.getDate():"0"+n.getDate();return"".concat(t,"-").concat(a,"-").concat(i)}t.d(n,{J:function(){return i},e:function(){return a}})},1661:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var a=t(5893),i=t(5675),l=t.n(i),r=t(682),s=t(3970),o=t(1664),c=t.n(o),d=t(1163),u=t(1649),f=t(5949),m=t(5753),h=t(1955);let p="profile-layout-navbar-item d-flex align-items-center justify-content-between";function x(e){var n,t,i,o;let{children:x}=e,{pathname:v,reload:j}=(0,d.useRouter)(),{user:g}=(0,u.v9)(e=>e.auth),y=(0,u.I0)();return(0,a.jsx)("div",{className:"profile-layout",children:(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)("aside",{className:"profile-layout-aside d-flex flex-column",children:[(0,a.jsx)("div",{className:"profile-layout-header border-bottom  d-flex mb-lg align-items-center justify-content-between gap-3",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)(l(),{src:(null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.avatar)||"/images/user-placeholder.png",alt:"",className:"img-fluid profile-layout-aside-avatar rounded-circle",width:60,height:60}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"profile-layout-aside-name m-0",children:[null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.first_name," ",null==g?void 0:null===(i=g.data)||void 0===i?void 0:i.middle_name]}),(0,a.jsx)("span",{children:null==g?void 0:null===(o=g.data)||void 0===o?void 0:o.package_type})]})]})}),(0,a.jsx)("nav",{className:"profile-layout-navbar",children:Object.values(s.m).map((e,n)=>(0,a.jsxs)(c(),{href:e.path,className:v===e.path?"active "+p:p,children:[(0,a.jsx)("span",{children:e.title}),(0,a.jsx)("i",{className:"las la-angle-left icon"})]},n))}),(0,a.jsx)("div",{className:"mt-auto",children:(0,a.jsx)(f.un,{type:"button",variant:"danger",style:{minWidth:"100%"},title:"تسجيل خروج",onClick:function(){h.Z.remove("access_token"),y((0,m.kS)()),j()}})})]}),(0,a.jsx)("div",{className:"profile-layout-content",children:x})]})})}},8061:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(5893),i=t(5949),l=t(1664),r=t.n(l);function s(e){return(0,a.jsxs)("div",{className:" mt-auto d-flex align-items-center justify-content-between border-top pt-4 gap-4",children:[(0,a.jsx)(i.Ai,{type:"submit",title:"حفظ",icon:"las la-check",style:{minWidth:"150px"},radius:!0,loading:e.loading}),e.path&&(0,a.jsxs)(r(),{href:e.path,className:"profile-form-footer d-flex align-items-center gap-3",children:[(0,a.jsx)("span",{children:e.link}),(0,a.jsx)("i",{className:"las la-long-arrow-alt-left icon"})]})]})}},5491:function(e,n,t){"use strict";t.d(n,{U:function(){return o}});var a=t(4597),i=t(4699);function l(e){return(0,i.Z)().post("user/profile",e)}function r(){return(0,i.Z)().get("user/profile")}var s=t(5949);function o(e){let{handlePayload:n}=e,{data:t,isLoading:i}=(0,a.ib)({queryFn:r,queryKey:"get-profile-data"}),{mutate:o,isLoading:c}=(0,a.uV)({queryFn:l,alert:!1});return{data:null==t?void 0:t.data,isLoadingProfileData:i,isLoading:c,handleSubmit:function(e,t){let a=n(e);o(a,{onSuccess:e=>{(0,s.FN)({icon:"success",title:"تم تحديث البيانات بنجاح"})},onError:e=>{var n,a;let i=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.errors;if(i)for(let e in i)t.setFieldError(e,i[e][0]);(0,s.FN)({icon:"error",title:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message})}})}}}},6019:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return x},default:function(){return v}});var a=t(5893),i=t(3663),l=t(1661),r=t(2175),s=t(3970),o=t(5949),c=t(6968),d=t(4051),u=t(1555),f=t(7474),m=t(8061),h=t(5491),p=t(7294),x=!0;function v(){var e;let{maritalStatus:n}=s.m;(0,f.e)(n.fields);let t=(0,f.e)(n.fields.at(-1).fields),{handleSubmit:i,isLoading:l,isLoadingProfileData:x,data:v}=(0,h.U)({handlePayload:function(e){let n=new FormData;for(let t in e)Array.isArray(e[t])?function(e,n,t){n.forEach((n,a)=>{for(let i in n)t.append("".concat(e,"[").concat(a,"][").concat(i,"]"),n[i])})}(t,e[t],n):n.append(t,e[t]);return n.append("step",2),n}});return x?(0,a.jsx)(c.Z,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):(0,a.jsx)("div",{children:(0,a.jsx)(r.J9,{initialValues:{...null==v?void 0:v.step_2,children_data:(null==v?void 0:null===(e=v.step_2)||void 0===e?void 0:e.children_data)||[t]},onSubmit:i,children:e=>{let{values:i}=e;return(0,a.jsxs)(r.l0,{className:"h-100 d-flex flex-column profile-form box",children:[(0,a.jsx)(d.Z,{children:n.fields.map((e,n)=>{var l,s,c;return(0,a.jsx)(u.Z,{...e.cols,className:"".concat((l=e.dependant,s=e.dependantValue,c=i[e.dependant],Array.isArray(s)?!l||s.includes(c):!l||c===s)?"":"order-last"),children:"fieldArray"!==e.type?(0,a.jsx)(o.nG,{item:e}):(0,a.jsx)(d.Z,{className:"align-items-end",children:(0,a.jsx)(r.F2,{name:e.name,render:n=>(0,a.jsx)(a.Fragment,{children:i[e.name].map((l,r)=>(0,a.jsxs)(p.Fragment,{children:[r>0&&(0,a.jsx)(u.Z,{xs:12,children:(0,a.jsx)("hr",{})},r+""+l.id+"border"),e.fields.map((n,t)=>(0,a.jsx)(u.Z,{...n.cols,children:(0,a.jsx)(o.nG,{item:{...n,name:"".concat(e.name,".").concat(r,".").concat(n.name),id:"".concat(n.id,".").concat(r,".").concat(t)}})},r+""+t+n.id)),(0,a.jsxs)(u.Z,{md:3,className:"d-flex justify-content-end align-items-center gap-3",children:["1"==i.has_children&&i[e.name].length-1>0&&(0,a.jsx)("button",{className:"remove-btn mb-md border-0 p-0",type:"button",onClick:()=>n.remove(r),children:(0,a.jsx)("i",{className:"las la-trash"})}),"1"==i.has_children&&i[e.name].length-1===r&&(0,a.jsx)("button",{className:"add-btn mb-md border-0 p-0 ",type:"button",onClick:()=>n.push(t),children:(0,a.jsx)("i",{className:"las la-plus"})})]},r+""+l.id+"actions")]},l.id+""+r+"wrapper"))})})})},n+e.id)})}),(0,a.jsx)(m.Z,{loading:l,link:"الحالة الصحية",path:"/profile/health-status"})]})}})})}v.getLayout=function(e){return(0,a.jsx)(i.Z,{containerProps:s.n.containerProps,headerProps:s.n.headerProps,children:(0,a.jsx)(l.Z,{children:e})})}},1163:function(e,n,t){e.exports=t(6885)}},function(e){e.O(0,[296,438,907,776,251,665,774,888,179],function(){return e(e.s=1833)}),_N_E=e.O()}]);