(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{2971:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/verify-email",function(){return n(7352)}])},3716:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),a=n(4051),i=n(1555);function o(e){let{children:t}=e;return(0,r.jsx)("section",{className:"auth-page",children:(0,r.jsxs)(a.Z,{md:2,className:"g-0",children:[(0,r.jsx)(i.Z,{className:"auth-container",children:t}),(0,r.jsx)(i.Z,{className:"layout",children:(0,r.jsx)("div",{className:"layout-bg"})})]})})}},3593:function(e,t,n){"use strict";n.d(t,{ZL:function(){return l},ph:function(){return o},Ow:function(){return c},vw:function(){return u}});var r=n(5893),a=n(1664),i=n.n(a);function o(e){let{title:t,link:n,path:a,noBack:o}=e;return(0,r.jsxs)("div",{className:"auth-header d-flex justify-content-between align-items-center",children:[o?(0,r.jsx)("div",{}):(0,r.jsx)(i(),{href:"/auth",className:"back-btn d-inline-flex align-items-center justify-content-center",children:(0,r.jsx)("i",{className:"las la-long-arrow-alt-right"})}),(0,r.jsxs)("span",{className:"account-option",children:[t,(0,r.jsx)(i(),{href:a,className:"account-option-link",children:n})]})]})}function u(e){let{title:t,subtitle:n}=e;return(0,r.jsxs)("div",{className:"auth-title",children:[(0,r.jsx)("h1",{className:"auth-title-text fw-bold text-capitalize",children:t}),(0,r.jsx)("h6",{className:"auth-subtitle-text m-0",children:n})]})}var s=n(5949);function c(e){let{title:t,loading:n}=e;return(0,r.jsx)("div",{className:"auth-submit mt-5",children:(0,r.jsx)(s.Ai,{type:"submit",title:t,loading:n})})}function l(e){let{forget:t}=e;return(0,r.jsx)("div",{className:"auth-footer mt-5 d-flex justify-content-between align-items-center",children:t?(0,r.jsx)(i(),{href:"/auth/forget-password",className:"forget-passowrd",children:"forget_passowrd"}):(0,r.jsx)("div",{})})}},4897:function(e,t,n){"use strict";n.d(t,{EH:function(){return o},fe:function(){return a},uX:function(){return i},z3:function(){return u}});var r=n(4699);function a(e){return(0,r.Z)().post("auth/login",e)}function i(e){return(0,r.Z)().post("register",e)}function o(e,t){return(0,r.Z)(e).post("auth/account/verify",t)}function u(e){return(0,r.Z)(e).post("auth/account/otp/resend")}},7352:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return p},default:function(){return h}});var r=n(5893),a=n(3593),i=n(3716),o=n(7294),u=function(e){return"object"==typeof e&&null!==e},s=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,a=void 0===r?4:r,i=e.onChange,s=e.renderInput,c=e.shouldAutoFocus,l=void 0!==c&&c,f=e.inputType,d=void 0===f?"text":f,p=e.renderSeparator,h=e.placeholder,v=e.containerStyle,m=e.inputStyle,g=o.useState(0),x=g[0],j=g[1],y=o.useRef([]),N=function(){return n?n.toString().split(""):[]},b="number"===d||"tel"===d;o.useEffect(function(){y.current=y.current.slice(0,a)},[a]),o.useEffect(function(){var e;l&&(null===(e=y.current[0])||void 0===e||e.focus())},[l]);var w=function(){if("string"==typeof h){if(h.length===a)return h;h.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},k=function(e){return(b?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},_=function(e){var t=e.target.value;if(k(t))A(t),S(x+1);else{var n=e.nativeEvent;null===n.data&&"deleteContentBackward"===n.inputType&&(e.preventDefault(),A(""),S(x-1))}},D=function(){j(x-1)},Z=function(e){var t=N();[e.code,e.key].includes("Backspace")?(e.preventDefault(),A(""),S(x-1)):"Delete"===e.code?(e.preventDefault(),A("")):"ArrowLeft"===e.code?(e.preventDefault(),S(x-1)):"ArrowRight"===e.code?(e.preventDefault(),S(x+1)):e.key===t[x]?(e.preventDefault(),S(x+1)):"Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code?e.preventDefault():b&&!k(e.key)&&e.preventDefault()},S=function(e){var t,n,r=Math.max(Math.min(a-1,e),0);y.current[r]&&(null===(t=y.current[r])||void 0===t||t.focus(),null===(n=y.current[r])||void 0===n||n.select(),j(r))},A=function(e){var t=N();t[x]=e[0],C(t)},C=function(e){i(e.join(""))},E=function(e){e.preventDefault();var t,n=N(),r=x,i=e.clipboardData.getData("text/plain").slice(0,a-x).split("");if(!(b&&i.some(function(e){return isNaN(Number(e))}))){for(var o=0;o<a;++o)o>=x&&i.length>0&&(n[o]=null!==(t=i.shift())&&void 0!==t?t:"",r++);S(r),C(n)}};return o.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},u(v)&&v),className:"string"==typeof v?v:void 0},Array.from({length:a},function(e,t){return t}).map(function(e){var t,n,r;return o.createElement(o.Fragment,{key:e},s({value:null!==(t=N()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=w())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return y.current[e]=t},onChange:_,onFocus:function(t){j(e),t.target.select()},onBlur:D,onKeyDown:Z,onPaste:E,autoComplete:"off",maxLength:1,"aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign({width:"1em",textAlign:"center"},u(m)&&m),className:"string"==typeof m?m:void 0,type:d},e),e<a-1&&("function"==typeof p?p(e):p))}))},c=n(4597),l=n(4897),f=n(1163),d=n(5949),p=!0;function h(){let{query:e,replace:t}=(0,f.useRouter)(),[n,i]=(0,o.useState)(""),{mutate:u,isLoading:p}=(0,c.uV)({queryFn:e=>(0,l.EH)(e.token,e.otp)}),{mutate:h,isLoading:v}=(0,c.uV)({queryFn:l.z3});return(0,r.jsxs)("section",{className:"verify",children:[(0,r.jsx)(a.ph,{title:"ليس لديك حساب؟",link:"انشاء حساب",path:"/auth/register"}),(0,r.jsx)(a.vw,{title:"تفعيل الحساب",subtitle:"تم ارسال رمز التحقيق الى البريد الالكترونى الخاص بك"}),(0,r.jsxs)("form",{onSubmit:function(r){r.preventDefault();let a=new FormData;a.append("otp",n),u({otp:a,token:e.token},{onSuccess:e=>{"Your email has been verified"===e.msg&&t("/auth/login")}})},children:[(0,r.jsx)(s,{value:n,onChange:i,numInputs:6,renderInput:e=>(0,r.jsx)("input",{...e,className:"input-code"}),containerStyle:{gap:"25px",justifyContent:"flex-start"}}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-4 mt-5",children:[(0,r.jsx)(d.Ai,{type:"submit",title:"تحقق",loading:p}),(0,r.jsx)(d.Ai,{variant:"secondary ",type:"button",title:"اعادة ارسال رمز التحقق",loading:v,onClick:function(){h(e.token)},style:{minWidth:"200px",backgroundColor:"transparent",height:"auto",padding:0,border:"none",color:"var(--text)"},classes:"resend-code-btn",icon:"las la-redo-alt"})]})]})]})}h.getLayout=function(e){return(0,r.jsx)(i.Z,{children:e})}},4699:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(6154),a=n(1083),i=n(1955),o=n(5753);function u(e){let t=e||i.Z.get("access_token"),n=r.Z.create({baseURL:"https://ahmedsprofile.com/api/",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json",ContentType:"application/json","Accept-Language":"ar","Content-Language":"ar"}});return n.interceptors.response.use(e=>e.data,e=>{var t,n,r,u;let s=(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(u=r.data)||void 0===u?void 0:u.msg);return["Unauthenticated","you don't have a verified email"].includes(s)&&(i.Z.remove("access_token"),a.Z.dispatch((0,o.kS)()),window.location.href="/auth"),Promise.reject(e.response)}),n}},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[296,438,907,251,774,888,179],function(){return e(e.s=2971)}),_N_E=e.O()}]);